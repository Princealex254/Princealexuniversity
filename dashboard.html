<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Dashboard | University Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1d4ed8;
      --secondary: #64748b;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #1e293b;
      --light: #f8fafc;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .sidebar {
      background: linear-gradient(180deg, #1e293b 0%, #334155 100%);
      box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
    }
    
    .nav-link {
      transition: all 0.3s ease;
      border-radius: 12px;
      margin: 4px 0;
      position: relative;
      overflow: hidden;
    }
    
    .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .nav-link:hover::before {
      left: 100%;
    }
    
    .nav-link:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateX(4px);
    }
    
    .nav-link.active {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
    }
    
    .header {
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
    }
    
    .content-frame {
      background: white;
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .btn {
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-danger {
      background: linear-gradient(135deg, var(--danger), #dc2626);
      color: white;
      border: none;
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
    }
    
    .mobile-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 40;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .mobile-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    
    .page-title {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    /* Custom scrollbar for sidebar */
    .sidebar nav::-webkit-scrollbar {
      width: 6px;
    }
    
    .sidebar nav::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
    }
    
    .sidebar nav::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
    }
    
    .sidebar nav::-webkit-scrollbar-thumb:hover {
      background: rgba(255, 255, 255, 0.5);
    }
    
    /* Firefox scrollbar */
    .sidebar nav {
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
    }
  </style>
</head>
<body class="flex h-screen">

  <!-- Mobile Overlay -->
  <div id="mobileOverlay" class="mobile-overlay lg:hidden"></div>

  <!-- Sidebar -->
  <aside id="sidebar" class="sidebar fixed inset-y-0 left-0 w-64 text-white transform -translate-x-full lg:translate-x-0 transition-transform z-50 flex flex-col">
    <div class="flex items-center justify-between p-6 border-b border-gray-600 flex-shrink-0">
      <div class="flex items-center">
        <img src="myschoollogo.png" alt="University Logo" class="h-8 w-auto mr-3">
        <div>
          <h2 class="text-xl font-bold">Student Portal</h2>
          <p class="text-sm text-gray-300 mt-1">Dashboard</p>
        </div>
      </div>
      <!-- Close btn (mobile only) -->
      <button id="closeSidebar" class="lg:hidden text-white text-2xl hover:text-gray-300 transition-colors">&times;</button>
    </div>
    <nav class="flex-1 overflow-y-auto p-6 space-y-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-gray-800">
      <a href="home.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-home mr-3"></i>Home
      </a>
      <a href="profile.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-user mr-3"></i>Profile
      </a>
      <a href="settings.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-cog mr-3"></i>Settings
      </a>
      <a href="courseReg.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-book-open mr-3"></i>Course Registration
      </a>
      <a href="timetable.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-calendar-alt mr-3"></i>Timetable
      </a>
      <a href="grades.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-chart-line mr-3"></i>Grades & Transcript
      </a>
      <a href="examCard.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-file-alt mr-3"></i>Exam Card
      </a>
      <a href="graduation.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-graduation-cap mr-3"></i>Graduation
      </a>
      <a href="clearance.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200 bg-white/5 border-l-4 border-teal-400">
        <i class="fas fa-check-circle mr-3 text-teal-400"></i>Clearance Request
      </a>
      <a href="finance.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-credit-card mr-3"></i>Finance
      </a>
      <a href="hostels.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-bed mr-3"></i>Hostels
      </a>
      <a href="announcements.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-bullhorn mr-3"></i>Announcements
      </a>
      <a href="signup.html" target="contentFrame" class="nav-link block px-4 py-3 text-white hover:bg-white/10 transition-all duration-200">
        <i class="fas fa-user-plus mr-3"></i>Sign Up
      </a>
      <div class="pt-4 mt-4 border-t border-gray-600">
        <button id="logoutBtn" class="btn btn-danger w-full px-4 py-3">
          <i class="fas fa-sign-out-alt mr-2"></i>Logout
        </button>
      </div>
    </nav>
  </aside>

  <!-- Main content -->
  <div class="flex-1 flex flex-col">
    <!-- Top bar -->
    <header class="header flex items-center justify-between text-white p-4 lg:ml-64">
      <div class="flex items-center gap-4">
        <button id="toggleSidebar" class="text-2xl text-white hover:text-gray-200 transition-colors lg:hidden">
          <i class="fas fa-bars"></i>
        </button>
        <div class="hidden lg:block">
          <h1 class="text-xl font-semibold">
            <i class="fas fa-tachometer-alt mr-2"></i>
            Student Dashboard
          </h1>
          <p class="text-sm text-blue-100">Welcome to your university portal</p>
        </div>
        <div class="lg:hidden">
          <h1 class="text-lg font-semibold">
            <i class="fas fa-tachometer-alt mr-2"></i>
            Dashboard
          </h1>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div class="text-sm bg-white/10 px-3 py-1 rounded-full">
          <i class="fas fa-user mr-1"></i>
          <span id="userEmail" class="hidden sm:inline">Loading...</span>
          <span class="sm:hidden">User</span>
        </div>
      </div>
    </header>

    <!-- iFrame container -->
    <main class="flex-1 p-2 lg:p-4 lg:ml-64">
      <iframe id="contentFrame" name="contentFrame" src="home.html" class="content-frame w-full h-full" 
              onload="console.log('Iframe loaded:', this.src)" 
              onerror="console.error('Iframe error loading:', this.src)"></iframe>
    </main>
  </div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyC0TdBjLeGimGoYZwLxzC4fQLPBdSzrT0A",
  authDomain: "universityweb-19e1e.firebaseapp.com",
  projectId: "universityweb-19e1e",
  storageBucket: "universityweb-19e1e.appspot.com",
  messagingSenderId: "401942926589",
  appId: "1:401942926589:web:c98e8d71ae6bd396775a94"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// Auth check
onAuthStateChanged(auth, user=>{
  if(!user) {
    window.location.href="index.html";
    return;
  }
  
  // Update user email in header
  const userEmailEl = document.getElementById('userEmail');
  if (userEmailEl && user.email) {
    userEmailEl.textContent = user.email;
  }
});

// Logout
document.getElementById("logoutBtn").onclick=()=>signOut(auth).then(()=>window.location.href="index.html");

// Sidebar toggle
const sidebar = document.getElementById("sidebar");
const mobileOverlay = document.getElementById("mobileOverlay");
let sidebarVisible = false; // Start hidden on mobile

// Check if we're on mobile
function isMobile() {
  return window.innerWidth < 1024; // lg breakpoint
}

function toggleSidebar() {
  if (isMobile()) {
    if (sidebarVisible) {
      closeSidebar();
    } else {
      openSidebar();
    }
  }
}

function openSidebar() {
  sidebar.classList.remove("-translate-x-full");
  sidebarVisible = true;
  mobileOverlay.classList.add("show");
}

function closeSidebar() {
  sidebar.classList.add("-translate-x-full");
  sidebarVisible = false;
  mobileOverlay.classList.remove("show");
}

// Handle window resize
window.addEventListener('resize', () => {
  if (!isMobile()) {
    // On desktop, always show sidebar
    sidebar.classList.remove("-translate-x-full");
    sidebarVisible = true;
    mobileOverlay.classList.remove("show");
  } else {
    // On mobile, hide sidebar by default
    if (sidebarVisible) {
      closeSidebar();
    }
  }
});

// Initialize sidebar state based on screen size
if (isMobile()) {
  closeSidebar();
} else {
  openSidebar();
}

document.getElementById("toggleSidebar").onclick = toggleSidebar;
document.getElementById("closeSidebar").onclick = closeSidebar;
mobileOverlay.onclick = closeSidebar;

// Handle navigation link clicks
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', (e) => {
    try {
      console.log('Navigation link clicked:', link.href); // Debug log
      
      // Remove active class from all links
      document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
      // Add active class to clicked link
      link.classList.add('active');
      
      // Close sidebar on mobile after navigation
      if (isMobile()) {
        closeSidebar();
      }
      
      // Ensure iframe loads the content
      const iframe = document.getElementById('contentFrame');
      if (iframe) {
        console.log('Loading iframe with:', link.href); // Debug log
        iframe.src = link.href;
        
        // Fallback: if iframe doesn't load, try direct navigation
        setTimeout(() => {
          try {
            if (iframe.contentDocument === null || iframe.contentDocument.readyState !== 'complete') {
              console.log('Iframe may not have loaded, trying direct navigation');
              // You can add additional fallback logic here if needed
            }
          } catch (error) {
            console.error('Error checking iframe state:', error);
          }
        }, 1000);
      }
    } catch (error) {
      console.error('Error in navigation click handler:', error);
    }
  });
});

// Set initial active link
window.addEventListener('load', () => {
  const currentSrc = document.getElementById('contentFrame').src;
  const currentPage = currentSrc.split('/').pop().split('.')[0];
  const activeLink = document.querySelector(`a[href="${currentPage}.html"]`);
  if (activeLink) {
    activeLink.classList.add('active');
  }
});
</script>

<!-- Footer -->
<footer class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white text-center py-2 text-sm z-50">
  <div class="container mx-auto px-4">
    Design by Prince Alex Digital. 2025
  </div>
</footer>
</body>
</html>


